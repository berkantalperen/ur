# File: teleoperation_ws/src/imu_sim/config/universal_servo_config.yaml
# We use the wildcard /** to force these params onto the node, regardless of its name.

/**:
  ros__parameters:
    # -------------------------------------------------------------------------
    # STRATEGY: Define parameters at BOTH levels to catch all MoveIt versions
    # -------------------------------------------------------------------------
    
    # 1. Root Level Definition (For flat parameter declaration)
    command_in_type: "speed_units"
    move_group_name: "ur_manipulator"
    command_out_topic: "/scaled_joint_trajectory_controller/joint_trajectory"
    joint_topic: "/joint_states_servo"
    
    # 2. Nested Level Definition (Standard MoveIt 2 Servo structure)
    moveit_servo:
      command_in_type: "speed_units"
      move_group_name: "ur_manipulator"
      
      # Topics
      command_out_topic: "/scaled_joint_trajectory_controller/joint_trajectory"
      joint_topic: "/joint_states_servo"
      cartesian_command_in_topic: "/servo_server/delta_twist_cmds"
      status_topic: "/servo_server/status"
      
      # Scales
      scale:
        linear: 0.6
        rotational: 0.3
        joint: 0.01

      # Properties
      publish_period: 0.033
      low_pass_filter_coeff: 2.0
      command_out_type: "trajectory_msgs/JointTrajectory"
      publish_joint_positions: true
      publish_joint_velocities: true
      publish_joint_accelerations: false
      
      # Frames
      planning_frame: "base_link"
      ee_frame_name: "tool0"
      robot_link_command_frame: "base_link"
      
      # Safety
      check_collisions: true
      collision_check_rate: 10.0
      self_collision_proximity_threshold: 0.01
      scene_collision_proximity_threshold: 0.02
      incoming_command_timeout: 0.5
      num_outgoing_halt_msgs_to_publish: 4
      
      # Singularity
      lower_singularity_threshold: 17.0
      hard_stop_singularity_threshold: 30.0
      joint_limit_margin: 0.1
      leaving_singularity_threshold_multiplier: 2.0
      
      # System
      use_gazebo: false
      is_primary_planning_scene_monitor: true